# Nianqiao-Meeting-Idle-Script
## 项目介绍

这是一个为《桃园深处有人家》游戏设计的挂机脚本，基于 **YOLOv8** 目标检测和屏幕捕捉实现，能够在念桥相会小游戏中自动检测人物和柱子位置，智能按压空格键完成桥梁建造。从而节省时间和精力，让玩家可以更加轻松地享受游戏的其他内容。

## 功能特点

- 🟢 **实时目标检测**：利用 YOLO 模型识别人和柱子，并绘制检测框和中心点。
- 🔵 **自动距离计算**：根据人物与柱子的位置计算横向距离，辅助判断桥梁长度。
- 🟣 **智能桥梁构建**：按斜率判断对齐方向，自动控制按键时间完成桥梁延伸。
- 🖥 **可视化界面**：在检测过程中显示人物、柱子以及连线，便于调试。
- ⚡ **轻量高效**：支持快速预测和连续操作，提升游戏效率。

## 使用方法

**1.**下载并安装python环境，python版本>=3.8，如已有可跳过该步骤，可参考以下视频


    https://www.bilibili.com/video/BV1A44y1a7rT

**2.**克隆仓库到本地，并进入仓库目录

**3.**在仓库目录空白处右击，选择在终端中打开并复制以下代码进入终端回车运行，安装必要依赖

```python
pip install -r requirements.txt
```

**4.**打开手机模拟器启动游戏，并缩小窗口，以MUMU模拟器为例，一次点击...->键鼠/手柄，并将空格键绑定至游戏中“长按搭桥的位置”

**5.**在终端中输入以下命令运行程序，而后点击模拟器窗口的左上和右下点坐标，获得窗口位置

```
python get_game_area.py
```

**6.**双击打开main.py文件，将窗口坐标填入截屏注释下的第一行，替换掉原本的region=(aaa,bbb,ccc,ddd)，请注意bbb和ccc的值请尽量不要过千，如果过千请缩小窗口并再次执行第5步

```
img = pyautogui.screenshot(region=(aaa, bbb, ccc, ddd))
```

**7.**在终端中输入以下代码运行主程序，之后再点击模拟器窗口使其成为当前焦点，即可正常使用

```
python main.py
```

## 注意事项

- 脚本基于屏幕截图和模拟按键，可能与游戏反作弊机制冲突，请自行承担风险。
- 截屏区域、桥梁速度参数可根据游戏实际调整，提升自动化准确度。
- 本人也是代码小白，欢迎大佬批评指正
